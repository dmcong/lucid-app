(globalThis.webpackChunklucid=globalThis.webpackChunklucid||[]).push([[481],{67353:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Page:()=>st});var n=s(55754),i=s(15780),r=s(45055),a=s(92950),o=s(32659),l=s(41630),c=s(95418),u=s(45263);const d=[void 0],m=e=>{let{mintAddress:t,size:s=24,icon:n=(0,u.jsx)(l.Z,{name:"diamond-outline"}),reversed:r=!1,...m}=e;const[p,h]=(0,a.useState)(d),{tokenProvider:g}=(0,i.useMint)(),{pools:y}=(0,i.usePool)(),x=(0,a.useCallback)((async e=>{const t=await g.findByAddress(e);if(null!==t&&void 0!==t&&t.logoURI)return t.logoURI}),[g]),j=(0,a.useCallback)((async()=>{if(!c.account.isAddress(t))return h(d);const e=Object.values(y||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:s}=e,n=await Promise.all([t,s].map(x));return r&&n.reverse(),h(n)}const s=await x(t);return h([s])}),[t,r,x,y]);return(0,a.useEffect)((()=>{j()}),[j]),1===p.length?(0,u.jsx)(o.Avatar,{src:p[0],size:s,style:{backgroundColor:"#2D3355",border:"none"},...m,children:n}):(0,u.jsx)(o.Avatar.Group,{style:{display:"block",whiteSpace:"nowrap"},...m,children:p.map(((e,t)=>(0,u.jsx)(o.Avatar,{src:e,size:s,style:{backgroundColor:"#2D3355",border:"none"},children:n},t)))})},p="Unknown Token",h=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[r,o]=(0,a.useState)(p),{tokenProvider:l}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),m=(0,a.useCallback)((async e=>{const t=await l.findByAddress(e);return null!==t&&void 0!==t&&t.name?t.name:p}),[l]),h=(0,a.useCallback)((async()=>{if(!c.account.isAddress(t))return o(p);const e=Object.values(d||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(m));return n&&r.reverse(),o(`${r.join(s)} LP`)}const i=await m(t);return o(i)}),[t,n,m,d,s]);return(0,a.useEffect)((()=>{h()}),[h]),(0,u.jsx)("span",{children:r})},g="TOKN",y=e=>{let{mintAddress:t,separator:s=" \u2022 ",reversed:n=!1}=e;const[r,o]=(0,a.useState)(g),{tokenProvider:l}=(0,i.useMint)(),{pools:d}=(0,i.usePool)(),m=(0,a.useCallback)((async e=>{const t=await l.findByAddress(e);return null!==t&&void 0!==t&&t.symbol?t.symbol:e.substring(0,4)}),[l]),p=(0,a.useCallback)((async()=>{if(!c.account.isAddress(t))return o(g);const e=Object.values(d||{}).find((e=>{let{mint_lpt:s}=e;return s===t}));if(e){const{mint_a:t,mint_b:i}=e,r=await Promise.all([t,i].map(m));return n&&r.reverse(),o(r.join(s))}const i=await m(t);return o(i)}),[t,n,m,d,s]);return(0,a.useEffect)((()=>{p()}),[p]),(0,u.jsx)("span",{children:r})};var x=s(58421);const j=e=>{let{mintAddress:t,onClick:s=(()=>{}),active:n=!1}=e;return(0,u.jsx)(o.Card,{bodyStyle:{padding:8,cursor:"pointer"},style:{borderRadius:8},className:"mint-tag",bordered:Boolean(n),onClick:()=>s(t),children:(0,u.jsxs)(o.Space,{size:8,style:{width:"100%",justifyContent:"center"},children:[(0,u.jsx)(m,{mintAddress:t}),(0,u.jsx)(o.Typography.Text,{ellipsis:!0,children:(0,u.jsx)(y,{mintAddress:t})}),n&&(0,u.jsx)(l.Z,{name:"checkmark-outline"})]})})},b=e=>{let{mintAddress:t,onClick:s=(()=>{})}=e;return(0,u.jsx)(o.Card,{bodyStyle:{padding:8},style:{boxShadow:"unset",cursor:"pointer"},bordered:!1,onClick:()=>s(t),children:(0,u.jsxs)(o.Row,{gutter:[16,16],align:"middle",children:[(0,u.jsx)(o.Col,{children:(0,u.jsx)(m,{mintAddress:t,size:36})}),(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{direction:"vertical",size:0,children:[(0,u.jsx)(o.Typography.Text,{children:(0,u.jsx)(y,{mintAddress:t})}),(0,u.jsx)(o.Typography.Text,{type:"secondary",className:"caption",children:(0,u.jsx)(h,{mintAddress:t})})]})})]})})},S=e=>{let{callback:t}=e;return(0,a.useEffect)((()=>{t()}),[t]),(0,u.jsx)(a.Fragment,{})},f=e=>(0,u.jsx)(x.ZP,{overflow:!0,children:(0,u.jsx)(S,{...e})}),w=()=>{const[e,t]=(0,a.useState)([]),{tokenProvider:s}=(0,i.useMint)(),n=(0,a.useCallback)((async()=>{const e=(await s.all()).map((e=>{let{address:t}=e;return t})),n=e.filter((t=>e.includes(t)));return t(n)}),[s]);return(0,a.useEffect)((()=>{n()}),[n]),e},M=e=>{const[t,s]=(0,a.useState)([]),{accounts:n}=(0,i.useAccount)(),r=(0,a.useMemo)((()=>{const e={};for(const t of Object.values(n))e[t.mint]=Number(t.amount.toString());return e}),[n]),o=(0,a.useCallback)((async e=>{const t=e.sort(((e,t)=>{let s=r[e]||-1,n=r[t]||-1;return Number(n)-Number(s)}));return s(t)}),[r]);return(0,a.useEffect)((()=>{o(e)}),[e,o]),{sortedMints:t,sortMints:o}};var A=s(63805),C=s(53933);const v=`${A.ef}:selected_mints`;let T;const k=e=>{let{value:t="",onChange:s=(()=>{}),style:n={},disabled:r=!1}=e;const[c,d]=(0,a.useState)(!1),[p,h]=(0,a.useState)(""),[g,S]=(0,a.useState)(20),{recommendedMints:A,addRecommendMint:k}=(()=>{const[e,t]=(0,a.useState)([]),s=w(),{sortedMints:n}=M(s),i=(0,a.useCallback)((async()=>{let e=C.Z.get(v)||[];for(const t of n){if(e.length>=8)break;e.includes(t)||e.push(t)}return t(e.slice(0,8))}),[n]),r=(0,a.useCallback)((async s=>{const n=e.filter((e=>e!==s)),i=[s,...n].slice(0,8);return C.Z.set(v,i),t(i)}),[e]);return(0,a.useEffect)((()=>{i()}),[i]),{recommendedMints:e,addRecommendMint:r}})(),{searchedMints:P,loading:R}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const[s,n]=(0,a.useState)(!1),[r,o]=(0,a.useState)([]),{tokenProvider:l}=(0,i.useMint)(),c=w(),u=(0,a.useCallback)((async()=>{if(!e)return n(!1),o(c);T&&clearTimeout(T),n(!0),T=setTimeout((async()=>{const s=(await l.find(e,t)).map((e=>{let{address:t}=e;return t}));return n(!1),o(s)}),500)}),[e,t,c,l]);return(0,a.useEffect)((()=>{u()}),[u]),{searchedMints:r,loading:s}}(p,0),{sortedMints:B}=M(P),N=(0,a.useCallback)((e=>{d(!1),s(e),k(e)}),[s,k]);return(0,a.useEffect)((()=>{S(20);const e=document.getElementById("sentre-token-selection-list");e&&(e.scrollTop=0)}),[p,c]),(0,a.useEffect)((()=>{c||h("")}),[c]),(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(o.Button,{type:"text",onClick:()=>d(!0),style:{padding:4,...n},disabled:r,children:(0,u.jsxs)(o.Space,{children:[(0,u.jsx)(m,{mintAddress:t}),(0,u.jsx)(y,{mintAddress:t}),(0,u.jsx)(l.Z,{name:"chevron-down-outline"})]})}),(0,u.jsx)(o.Modal,{visible:c,onCancel:()=>d(!1),footer:null,closable:!1,centered:!0,children:(0,u.jsxs)(o.Row,{gutter:[32,32],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Input,{placeholder:"Search token symbol, name, address, ...",suffix:(0,u.jsx)(o.Button,{type:"text",style:{marginRight:-7},icon:(0,u.jsx)(l.Z,{name:p?"close-outline":"search-outline"}),onClick:p?()=>h(""):()=>{},loading:R}),value:p,onChange:e=>h(e.target.value||"")})}),!p.length&&(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Row,{gutter:[8,8],children:A.map((e=>(0,u.jsx)(o.Col,{xs:12,sm:8,md:6,children:(0,u.jsx)(j,{mintAddress:e,onClick:N,active:e===t})},e)))})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Row,{gutter:[8,8],style:{maxHeight:360},className:"scrollbar",id:"sentre-token-selection-list",justify:"center",children:B.length?B.slice(0,g).map(((e,t)=>(0,u.jsxs)(o.Col,{span:24,children:[(0,u.jsx)(x.ZP,{height:60,overflow:!0,children:(0,u.jsx)(b,{mintAddress:e,onClick:N})}),t===g-5&&(0,u.jsx)(f,{callback:()=>S(g+20)})]},e))):(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Empty,{style:{padding:40}})})})})]})})]})},P=e=>{let{label:t="",tooltip:s,value:n="",mintAddress:i,primary:r}=e;const a=r?{color:"#ABFC47"}:{};return(0,u.jsxs)(o.Space,{direction:"vertical",size:4,children:[(0,u.jsxs)(o.Space,{size:4,children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",children:t}),s&&(0,u.jsx)(o.Tooltip,{title:s,children:(0,u.jsx)(o.Button,{type:"text",shape:"circle",size:"small",icon:(0,u.jsx)(o.Typography.Text,{type:"secondary",children:(0,u.jsx)(l.Z,{name:"information-circle-outline"})})})})]}),(0,u.jsxs)(o.Space,{size:4,children:[(0,u.jsx)(o.Typography.Title,{level:5,style:{...a},children:n}),(0,u.jsx)("div",{style:{marginTop:-3},children:i&&(0,u.jsx)(m,{mintAddress:i,size:18})})]})]})};var R=s(87408);const B=e=>{let{preffix:t,suffix:s,children:n,disabled:i=!1,loading:r=!1,onClick:a=(()=>{})}=e;return(0,u.jsx)("button",{className:"btn-neon",onClick:a,children:(0,u.jsx)("span",{className:"btn-neon-child",children:(0,u.jsxs)(o.Space,{size:6,children:[r&&(0,u.jsx)(o.Spin,{spinning:!0,indicator:(0,u.jsx)(R.Z,{})}),t,n,s]})})})};var N=s(33804),I=s(59186),K=s(71256);const z={version:"0.1.0",name:"lucid",instructions:[{name:"initializePool",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!0,isSigner:!1},{name:"stableTokenAccount",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"cert",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"fee",type:"u64"},{name:"amount",type:"u64"},{name:"stableAmount",type:"u64"},{name:"baseAmount",type:"u64"}]},{name:"mintStable",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"stableTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"baseAmount",type:"u64"}]},{name:"burnStable",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"stableTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"stableAmount",type:"u64"}]},{name:"addLiquidity",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!0,isSigner:!1},{name:"stableTokenAccount",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"},{name:"stableAmount",type:"u64"},{name:"baseAmount",type:"u64"}]},{name:"removeLiquidity",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"lptAmount",type:"u64"}]},{name:"borrow",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!0,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"lptAmount",type:"u64"}]},{name:"repay",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!0,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"buy",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!0,isSigner:!1},{name:"stableTokenAccount",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"stableAmount",type:"u64"},{name:"baseAmount",type:"u64"}]},{name:"sell",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"stableMint",isMut:!0,isSigner:!1},{name:"baseMint",isMut:!1,isSigner:!1},{name:"lptMint",isMut:!0,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"stableTreasury",isMut:!0,isSigner:!1},{name:"baseTreasury",isMut:!0,isSigner:!1},{name:"lptTreasury",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!0,isSigner:!1},{name:"stableTokenAccount",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"lptTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amount",type:"u64"}]},{name:"initializeJupiter",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"jupiter",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"swapJupiter",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"jupiter",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"baseMint",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"mintTreasury",isMut:!0,isSigner:!1},{name:"tokenAccount",isMut:!0,isSigner:!1},{name:"baseTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amountIn",type:"u64"},{name:"amountOut",type:"u64"}]}],accounts:[{name:"cert",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"amount",type:"u64"}]}},{name:"cheque",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"borrowAmount",type:"u64"},{name:"baseAmount",type:"u64"}]}},{name:"jupiter",type:{kind:"struct",fields:[{name:"baseMint",type:"publicKey"}]}},{name:"pool",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"baseMint",type:"publicKey"},{name:"stableMint",type:"publicKey"},{name:"lptMint",type:"publicKey"},{name:"treasurer",type:"publicKey"},{name:"balance",type:"u64"},{name:"stableBalance",type:"u64"},{name:"baseBalance",type:"u64"},{name:"fee",type:"u64"},{name:"totalLptFee",type:"u64"},{name:"lptSupply",type:"u64"},{name:"startTime",type:"i64"}]}}],errors:[{code:6e3,name:"OverBorrow",msg:"Over borrow limit!"},{code:6001,name:"AmountZero",msg:"Required greater than zero"},{code:6002,name:"Slippage",msg:"Slippage error"},{code:6003,name:"InvalidAmount",msg:"Invalid Amount"}]};var D=s(97429).Buffer;const L={rent:N.rV.SYSVAR_RENT_PUBKEY,systemProgram:N.rV.SystemProgram.programId,associatedTokenProgram:N.P6.token.ASSOCIATED_PROGRAM_ID,tokenProgram:I.H_};const O=class{constructor(e,t){var s=this;if(this._provider=void 0,this.program=void 0,this.getPools=async()=>{let e=await this.program.account.pool.all();e=e.sort(((e,t)=>t.account.totalLptFee.toNumber()-e.account.totalLptFee.toNumber()));const t={};for(const s of e)t[s.publicKey.toBase58()]=s.account;return t},this.getPoolPDAs=async(e,t,s)=>{const n=new N.rV.PublicKey(e),i=new N.rV.PublicKey(t),r=new N.rV.PublicKey(s),[a]=await N.rV.PublicKey.findProgramAddress([D.from("treasurer"),n.toBuffer()],this.program.programId),[o]=await N.rV.PublicKey.findProgramAddress([D.from("stable_mint"),n.toBuffer()],this.program.programId),[l]=await N.rV.PublicKey.findProgramAddress([D.from("lpt_mint"),n.toBuffer()],this.program.programId);return{pool:e,treasurer:a,mint:t,stableMint:o,baseMint:s,lptMint:l,treasury:await N.P6.token.associatedAddress({mint:i,owner:a}),stableTreasury:await N.P6.token.associatedAddress({mint:o,owner:a}),baseTreasury:await N.P6.token.associatedAddress({mint:r,owner:a}),lptTreasury:await N.P6.token.associatedAddress({mint:l,owner:a})}},this.getTokenAccounts=async(e,t,s,n)=>{const i=new N.rV.PublicKey(e),r=new N.rV.PublicKey(s),a=new N.rV.PublicKey(n),o=await this.getPoolPDAs(t,s,n),l=await N.P6.token.associatedAddress({mint:r,owner:i}),c=await N.P6.token.associatedAddress({mint:a,owner:i}),u=await N.P6.token.associatedAddress({mint:o.stableMint,owner:i}),d=await N.P6.token.associatedAddress({mint:o.lptMint,owner:i}),[m]=await N.rV.PublicKey.findProgramAddress([D.from("cheque"),new N.rV.PublicKey(t).toBuffer(),i.toBuffer()],this.program.programId),[p]=await N.rV.PublicKey.findProgramAddress([o.lptMint.toBuffer(),i.toBuffer()],this.program.programId);return{cert:p,cheque:m,lptTokenAccount:d,tokenAccount:l,stableTokenAccount:u,baseTokenAccount:c}},this.initializePool=async(e,t,s,n,i,r)=>{const a=N.rV.Keypair.generate(),o=await this.getPoolPDAs(a.publicKey,e,t),l=this._provider.wallet,c=await this.getTokenAccounts(l.publicKey,a.publicKey,e,t),u=K.ComputeBudgetProgram.requestUnits({units:4e5,additionalFee:0}),d=(new K.Transaction).add(u),m=await this.program.methods.initializePool(s,n,i,r).accounts({authority:l.publicKey,...o,...c,...L}).instruction();d.add(m);return{txId:await this._provider.sendAndConfirm(d,[a]),address:a.publicKey}},this.mintStable=async(e,t)=>{const{mint:s,baseMint:n}=await this.program.account.pool.fetch(e),i=await this.getPoolPDAs(e,s,n),r=this._provider.wallet,a=await this.getTokenAccounts(r.publicKey,e,s,n);return{txId:await this.program.methods.mintStable(t).accounts({authority:r.publicKey,...i,...a,...L}).rpc()}},this.burnStable=async(e,t)=>{const{mint:s,baseMint:n}=await this.program.account.pool.fetch(e),i=await this.getPoolPDAs(e,s,n),r=this._provider.wallet,a=await this.getTokenAccounts(r.publicKey,e,s,n);return{txId:await this.program.methods.burnStable(t).accounts({authority:r.publicKey,...i,...a,...L}).rpc()}},this.addLiquidity=async(e,t,s,n)=>{const{mint:i,baseMint:r}=await this.program.account.pool.fetch(e),a=await this.getPoolPDAs(e,i,r),o=this._provider.wallet,l=await this.getTokenAccounts(o.publicKey,e,i,r);return{txId:await this.program.methods.addLiquidity(t,s,n).accounts({authority:o.publicKey,...a,...l,...L}).rpc()}},this.removeLiquidity=async(e,t)=>{const{mint:s,baseMint:n}=await this.program.account.pool.fetch(e),i=await this.getPoolPDAs(e,s,n),r=this._provider.wallet,a=await this.getTokenAccounts(r.publicKey,e,s,n);return{txId:await this.program.methods.removeLiquidity(t).accounts({authority:r.publicKey,...i,...a,...L}).rpc()}},this.borrow=async(e,t)=>{const{mint:s,baseMint:n}=await this.program.account.pool.fetch(e),i=await this.getPoolPDAs(e,s,n),r=this._provider.wallet,a=await this.getTokenAccounts(r.publicKey,e,s,n);return{txId:await this.program.methods.borrow(t).accounts({authority:r.publicKey,...i,...a,...L}).rpc()}},this.repay=async e=>{const{mint:t,baseMint:s}=await this.program.account.pool.fetch(e),n=await this.getPoolPDAs(e,t,s),i=this._provider.wallet,r=await this.getTokenAccounts(i.publicKey,e,t,s);return{txId:await this.program.methods.repay().accounts({authority:i.publicKey,...n,...r,...L}).rpc()}},this.buy=async(e,t,s)=>{const{mint:n,baseMint:i}=await this.program.account.pool.fetch(e),r=await this.getPoolPDAs(e,n,i),a=this._provider.wallet,o=await this.getTokenAccounts(a.publicKey,e,n,i);return{txId:await this.program.methods.buy(t,s).accounts({authority:a.publicKey,...r,...o,...L}).rpc()}},this.sell=async(e,t)=>{const{mint:s,baseMint:n}=await this.program.account.pool.fetch(e),i=await this.getPoolPDAs(e,s,n),r=this._provider.wallet,a=await this.getTokenAccounts(r.publicKey,e,s,n);return{txId:await this.program.methods.sell(t).accounts({authority:r.publicKey,...i,...a,...L}).rpc()}},this.watch=(e,t)=>this.program.provider.connection.onProgramAccountChange(this.program.programId,(t=>{let{accountId:s,accountInfo:{data:n}}=t;const i=s.toBase58();try{const t=this.program.coder.accounts.decode("pool",n);return e(null,{type:"pool",address:i,data:t})}catch(r){}}),"confirmed",t),this.unwatch=async e=>{if(e)return await this.program.provider.connection.removeProgramAccountChangeListener(e)},this.getAllJupiter=async()=>this.program.account.jupiter.all(),this.getJupiterPDAs=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.rV.Keypair.generate().publicKey;const n=new N.rV.PublicKey(e);let i,r;const[a]=await N.rV.PublicKey.findProgramAddress([D.from("treasurer"),n.toBuffer()],s.program.programId),[o]=await N.rV.PublicKey.findProgramAddress([D.from("base_mint"),n.toBuffer()],s.program.programId);return t&&(i=new N.rV.PublicKey(t),r=await N.P6.token.associatedAddress({mint:i,owner:a})),{jupiter:n,treasurer:a,mint:i,mintTreasury:r,baseMint:o}},this.getTokenAccountsJupiter=async(e,t,s)=>{const n=new N.rV.PublicKey(e),i=new N.rV.PublicKey(t),r=new N.rV.PublicKey(s);return{tokenAccount:await N.P6.token.associatedAddress({mint:i,owner:n}),baseTokenAccount:await N.P6.token.associatedAddress({mint:r,owner:n})}},this.initializeJupiter=async()=>{const e=N.rV.Keypair.generate(),t=this._provider.wallet,s=await this.getJupiterPDAs(e.publicKey);return{txId:await this.program.methods.initializeJupiter().accounts({authority:t.publicKey,...s,...L}).signers([e]).rpc(),address:e.publicKey}},this.swapJupiter=async(e,t,s,n)=>{const i=await this.getAllJupiter(),r=this._provider.wallet;for(const a of i){if(a.account.baseMint.toBase58()!==e.toString())continue;const i=await this.getJupiterPDAs(a.publicKey,t),o=await this.getTokenAccountsJupiter(r.publicKey,t,a.account.baseMint);return this.program.methods.swapJupiter(s,n).accounts({authority:r.publicKey,...i,...o,...L}).rpc()}return null},!(e=>{if(!e)return!1;try{if(!new N.rV.PublicKey(e))throw new Error("Invalid public key");return!0}catch(t){return!1}})(t))throw new Error("Invalid program id");this._provider=e,this.program=new N.$r(z,t,this._provider)}},E=()=>{const{wallet:e}=(0,i.useWallet)(),t=(0,a.useMemo)((()=>((e,t,s)=>{const n=new K.Connection(e,"confirmed"),i=new K.PublicKey(t);return new N.Y7(n,{publicKey:new K.PublicKey(i),signTransaction:s.signTransaction,signAllTransactions:async e=>{const t=[];for(const n of e){const e=await s.signTransaction(n);t.push(e)}return t}},{commitment:"confirmed",skipPreflight:!0})})(A.f4,e.address,window.sentre.wallet)),[e.address]);return t},F=()=>{const e=E();return(0,a.useMemo)((()=>new O(e,"HG1dAGfncS2uxij2Dvs16m8QPFy3q8g6DZwrnPK6W7X8")),[e])};var V=s(45268);const q=(e,t)=>window.notify({type:"success",description:`${e} successfully. Click to view details.`,onClick:()=>window.open((0,V.kU)(t),"_blank")}),Z=e=>(console.log("er",e),window.notify({type:"error",description:e.message}));var _=s(40106);const W=()=>{const{getDecimals:e}=(0,i.useMint)(),t=(0,a.useCallback)((async(t,s)=>{const n=await e(new N.rV.PublicKey(s).toString());return new N.BN(_.default.decimalize(t,n).toString())}),[e]),s=(0,a.useCallback)((async(t,s)=>{const n=await e(new N.rV.PublicKey(s).toString());return _.default.undecimalize(BigInt(t.toString()),n)}),[e]);return{decimalize:(0,a.useCallback)(((e,t)=>new N.BN(_.default.decimalize(e,t).toString())),[]),undecimalize:(0,a.useCallback)(((e,t)=>_.default.undecimalize(BigInt(e.toString()),t)),[]),decimalizeMintAmount:t,undecimalizeMintAmount:s}};const J={appId:"lucid",url:"https://dmcong.github.io/lucid-app/index.js"},Q={devnet:{node:"https://api.devnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",baseMint:"86RG7SrLu1dtuE2Eyg3XqWjEdpUwNUM7hsbMS5MVmv66"},testnet:{node:"https://api.testnet.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",baseMint:""},mainnet:{node:"https://api.mainnet-beta.solana.com",spltAddress:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",splataAddress:"ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL",baseMint:""}},G={manifest:{development:{...J},staging:{...J},production:{...J}}[A.OB],sol:Q[A.ef]},$=e=>{const[t,s]=(0,a.useState)(void 0),{getDecimals:n}=(0,i.useMint)(),r=(0,a.useCallback)((async()=>{try{const t=await n(e);return s(t)}catch(t){return s(void 0)}}),[e,n]);return(0,a.useEffect)((()=>{r()}),[r]),t},H=(e,t,s)=>c.account.isAddress(e)&&void 0!==t&&void 0!==s?{mintAddress:e,amount:t,decimals:s,balance:Number(c.utils.undecimalize(t,s))}:{amount:BigInt(0),decimals:0,balance:0},U=e=>{const{wallet:{address:t,lamports:s}}=(0,i.useWallet)(),{accounts:n}=(0,i.useAccount)(),{amount:r,mint:a}=n[e]||{},o=$(a)||0;return c.account.isAddress(t)&&c.account.isAddress(e)?e===t?H(c.DEFAULT_EMPTY_ADDRESS,s,9):H(a,r,o):H()},Y=e=>{const[t,s]=(0,a.useState)(""),{wallet:{address:n}}=(0,i.useWallet)(),r=U(t);return(0,a.useEffect)((()=>{(async()=>{if(!c.account.isAddress(n)||!c.account.isAddress(e))return s("");const{sentre:{splt:t}}=window;try{const i=await t.deriveAssociatedAddress(n,e);s(i)}catch(i){return s("")}})()})),r},X=()=>{const e=(e,t,s,n)=>e.map(((e,t)=>Number(_.default.undecimalize(BigInt(e.toString()),n[t])))).reduce(((e,i,r)=>{const a={balanceIn:t[r],balanceOut:s,weightIn:.5,decimalIn:n[r],swapFee:new N.BN(0)},o=((e,t)=>{const s=Number(_.default.undecimalize(BigInt(t.balanceOut.toString()),9)),n=Number(_.default.undecimalize(BigInt(e.toString()),9)),i=t.weightIn,r=Number(_.default.undecimalize(BigInt(t.balanceIn.toString()),t.decimalIn)),a=Number(_.default.undecimalize(BigInt(t.swapFee.toString()),9));return Math.pow((n+s)/s,1/i)*r/((n+s)*(1+a*(-1+i))*i)})(new N.BN(0),a);return e+i/o}),0);return{calcDepositInfo:(t,s,n,i,r)=>{if(0===i.length)return{lpOut:0,impactPrice:0};const a=Number(((e,t,s,n,i)=>{const r=Number(_.default.undecimalize(BigInt(i.toString()),9)),a=Number(_.default.undecimalize(BigInt(s.toString()),9)),o=t.map(((e,t)=>Number(_.default.undecimalize(BigInt(e.toString()),n[t])))),l=e.map(((e,t)=>Number(_.default.undecimalize(BigInt(e.toString()),n[t]))));console.log(r,a,o,l,"numAmountIns");const c=new Array(e.length);let u=0;for(let m=0;m<e.length;m++)c[m]=(o[m]+l[m])/o[m],u+=.5*c[m];let d=1;for(let m=0;m<e.length;m++){let e=l[m];if(c[m]>u){let t=o[m]*(u-1);e=t+(l[m]-t)*(1-r)}d*=((o[m]+e)/o[m])**.5}return d>1?a*(d-1):0})(t,s,n,i,r).toFixed(9));return{lpOut:a,impactPrice:1-a/Number(e(t,s,n,i).toFixed(9))||0}},calcMintReceivesRemoveFullSide:(e,t,s)=>{let n=e.toNumber()/t.toNumber();return s.map((e=>new N.BN(n*Number(e))))},calcOutGivenInSwap:(e,t,s,n)=>t*(1-s/(s+e))*(1-n)}},ee=e=>(0,n.useSelector)((t=>t.pools[e])),te=e=>{let{onChange:t,disabled:s=!1,mints:n}=e;const[r,c]=(0,a.useState)(""),{tokenProvider:d}=(0,i.useMint)(),m=(0,a.useCallback)((async()=>{if(!r||r.length<3)return t(n);const e=(await d.find(r)).filter((e=>{let{address:t}=e;return n.includes(t)})).map((e=>{let{address:t}=e;return t}));return n.forEach((t=>{if(!e.includes(t)&&t.toLowerCase().includes(r.toLowerCase()))return e.push(t)})),t(e)}),[r,t,d,n]);return(0,a.useEffect)((()=>{m()}),[m]),(0,u.jsx)(o.Card,{className:"mint-search",bodyStyle:{padding:0},style:{padding:8},bordered:!1,children:(0,u.jsx)(o.Input,{placeholder:"Search",value:r,size:"small",bordered:!1,suffix:(0,u.jsx)(o.Button,{type:"text",style:{marginRight:-7},size:"small",onClick:r?()=>c(""):()=>{},icon:(0,u.jsx)(l.Z,{name:r?"close-outline":"search-outline"}),disabled:s}),onChange:e=>c(e.target.value),disabled:s})})},se=e=>{let{mintAddress:t,onClick:s,active:n=!1}=e;return(0,u.jsx)(o.Card,{bodyStyle:{padding:0},className:"card-child-balansol mint-select-item",bordered:n,onClick:s,hoverable:!0,children:(0,u.jsxs)(o.Space,{size:12,style:{display:"flex"},children:[(0,u.jsx)(m,{mintAddress:t,size:32}),(0,u.jsx)(o.Typography.Text,{style:{margin:0},children:(0,u.jsx)(y,{mintAddress:t})}),(0,u.jsx)(o.Divider,{type:"vertical",style:{margin:0}}),(0,u.jsx)(o.Typography.Text,{type:"secondary",style:{margin:0,fontSize:12},children:(0,u.jsx)(h,{mintAddress:t})})]})})},ne=e=>{let{selectedMint:t,onChange:s,visible:n,mints:i,onClose:r}=e;const[c,d]=(0,a.useState)(i);return(0,u.jsx)(o.Modal,{visible:n,closeIcon:(0,u.jsx)(l.Z,{name:"close"}),footer:null,destroyOnClose:!0,centered:!0,onCancel:r,children:(0,u.jsxs)(o.Row,{gutter:[16,16],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Typography.Title,{level:4,children:"Select token"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(te,{mints:i,onChange:d})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Row,{gutter:[16,16],style:{height:300},className:"scrollbar",children:(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Row,{gutter:[16,16],children:c.slice(0,100).map(((e,n)=>(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(x.ZP,{height:48,overflow:!0,children:(0,u.jsx)(se,{mintAddress:e,onClick:()=>s(e),active:t===e})})},n)))})})})})]})})},ie=e=>{let{selectedMint:t,mints:s=[],onChange:n=(()=>{}),mintLabel:i,mintAvatar:r}=e;const[c,d]=(0,a.useState)(!1);return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsxs)(o.Space,{className:"mint-select",onClick:()=>d(s.length>0),children:[r||(0,u.jsx)(m,{mintAddress:t}),i||(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",children:(0,u.jsx)(y,{mintAddress:t})}),s.length?(0,u.jsx)(o.Typography.Text,{type:"secondary",children:(0,u.jsx)(l.Z,{name:"chevron-down-outline"})}):null]})]}),c&&(0,u.jsx)(ne,{selectedMint:t,visible:c,onChange:e=>(n&&n(e),d(!1)),mints:s,onClose:()=>d(!1)})]})};let re;const ae=(0,a.forwardRef)(((e,t)=>{var s;let{max:n,onValue:i=(()=>{}),onChange:r=(()=>{}),...c}=e;const[d,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),g=(0,a.useRef)(t),y=(0,a.useCallback)((e=>{const t=e=>{re&&(clearTimeout(re),re=void 0),m(e),re=setTimeout((()=>m("")),500)};return/^\d*(\.\d*)?$/.test(e)?n&&parseFloat(e)>parseFloat(n.toString())?t("Not enough balance"):i(e):t("Invalid character")}),[n,i]);return null!==p&&(null===g||void 0===g||null===(s=g.current)||void 0===s||s.setSelectionRange(p,p)),(0,u.jsx)(o.Tooltip,{title:(0,u.jsxs)(o.Space,{children:[(0,u.jsx)(l.Z,{name:"warning"}),d]}),visible:!!d,children:(0,u.jsx)(o.Input,{...c,onChange:e=>{r(e),h(e.target.selectionStart),y(e.target.value||"")},ref:g})})})),{sol:{baseMint:oe}}=G,le=e=>{let{poolAddress:t}=e;const[s,i]=(0,a.useState)("0"),[r,c]=(0,a.useState)("0"),[d,p]=(0,a.useState)(!1),h=(0,n.useSelector)((e=>e.pools)),{mint:g}=h[t],y=g.toBase58(),x=F(),{decimalizeMintAmount:j,undecimalizeMintAmount:b}=W(),{calcOutGivenInSwap:S}=X(),f=ee(t),{balance:w}=Y(oe);return(0,u.jsxs)(o.Row,{gutter:[24,24],justify:"center",children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:"4px 4px 0 0",background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},children:(0,u.jsxs)(o.Row,{align:"middle",justify:"end",children:[(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{onClick:()=>i(w.toString()),style:{cursor:"pointer"},children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",style:{textDecoration:"underline"},children:"Available:"}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000",textDecoration:"underline"},children:w})]})}),(0,u.jsx)(o.Col,{span:24}),(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(ie,{mintAvatar:(0,u.jsx)(m,{mintAddress:oe}),selectedMint:oe})}),(0,u.jsx)(o.Col,{span:20,children:(0,u.jsx)(ae,{bordered:!1,style:{color:"#000",fontSize:32,textAlign:"right"},value:s,onValue:async e=>{i(e);const{balance:t,stableBalance:s,fee:n,stableMint:r,mint:a}=f,o=await b(t,a),l=await b(s,r),u=await b(n,r),d=S(Number(e),Number(o),Number(l),Number(u));c(`${d}`)}})})]})})}),(0,u.jsx)(o.Col,{span:24,style:{position:"relative",minHeight:2},children:(0,u.jsx)(l.Z,{style:{position:"absolute",color:"#000000",borderRadius:99,border:"2px solid #e2f8f4",left:"50%",background:"#c9e3d9",top:-8,zIndex:99},name:"arrow-down-outline"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:"0 0 4px 4px",background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},children:(0,u.jsxs)(o.Row,{gutter:[24,24],align:"middle",children:[(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(ie,{mintAvatar:(0,u.jsx)(m,{mintAddress:y}),selectedMint:y})}),(0,u.jsx)(o.Col,{span:20,style:{textAlign:"right"},children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000",fontSize:32,paddingRight:10,paddingLeft:32},ellipsis:!0,children:r})})]})})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{loading:d,type:"primary",block:!0,onClick:async()=>{p(!0);try{console.log(s,"so luong amount");const e=await j(s,oe),{txId:n}=await x.buy(t,e,e);return q("Deposited",n)}catch(e){Z(e)}finally{p(!1)}},children:"Buy"})})]})},{sol:{baseMint:ce}}=G,ue=e=>{let{poolAddress:t}=e;const[s,i]=(0,a.useState)("0"),[r,c]=(0,a.useState)("0"),[d,p]=(0,a.useState)(!1),h=(0,n.useSelector)((e=>e.pools)),{mint:g}=h[t],y=g.toBase58(),x=F(),{decimalizeMintAmount:j,undecimalizeMintAmount:b}=W(),{calcOutGivenInSwap:S}=X(),f=ee(t),{balance:w}=Y(y);return(0,u.jsxs)(o.Row,{gutter:[24,24],justify:"center",children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:"4px 4px 0 0",background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},children:(0,u.jsxs)(o.Row,{align:"middle",justify:"end",children:[(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{onClick:()=>i(w.toString()),style:{cursor:"pointer"},children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",style:{textDecoration:"underline"},children:"Available:"}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000",textDecoration:"underline"},children:w})]})}),(0,u.jsx)(o.Col,{span:24}),(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(ie,{mintAvatar:(0,u.jsx)(m,{mintAddress:y}),selectedMint:y})}),(0,u.jsx)(o.Col,{span:20,children:(0,u.jsx)(ae,{bordered:!1,style:{color:"#000",fontSize:32,textAlign:"right"},value:s,onValue:async e=>{i(e);const{balance:t,stableBalance:s,fee:n,stableMint:r,mint:a}=f,o=await b(t,a),l=await b(s,r),u=await b(n,r),d=S(Number(e),Number(o),Number(l),Number(u));c(`${d}`)}})})]})})}),(0,u.jsx)(o.Col,{span:24,style:{position:"relative",minHeight:2},children:(0,u.jsx)(l.Z,{style:{position:"absolute",color:"#000000",borderRadius:99,border:"2px solid #e2f8f4",left:"50%",background:"#c9e3d9",top:-8,zIndex:99},name:"arrow-down-outline"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:"0 0 4px 4px",background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},children:(0,u.jsxs)(o.Row,{gutter:[24,24],align:"middle",children:[(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(ie,{mintAvatar:(0,u.jsx)(m,{mintAddress:ce}),selectedMint:ce})}),(0,u.jsx)(o.Col,{span:20,style:{textAlign:"right"},children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000",fontSize:32,paddingRight:10,paddingLeft:32},ellipsis:!0,children:r})})]})})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{loading:d,type:"primary",block:!0,onClick:async()=>{p(!0);try{console.log(s,"so luong amount");const e=await j(s,ce),{txId:n}=await x.buy(t,e,e);return q("Deposited",n)}catch(e){Z(e)}finally{p(!1)}},children:"Buy"})})]})},de=e=>{let{poolAddress:t}=e;const[s,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)("Buy");return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(B,{onClick:()=>n(!0),children:"Buy / Sell"}),(0,u.jsx)(o.Modal,{visible:s,closeIcon:(0,u.jsx)(l.Z,{name:"close-outline"}),onCancel:()=>n(!1),footer:null,className:"lucid-modal-gradient",children:(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{span:24,style:{textAlign:"center"},children:(0,u.jsx)(o.Segmented,{value:i,onChange:e=>r(e),options:["Buy","Sell"]})}),(0,u.jsx)(o.Col,{span:24,children:"Buy"===i?(0,u.jsx)(le,{poolAddress:t}):(0,u.jsx)(ue,{poolAddress:t})})]})})]})},me=e=>{const[t,s]=(0,a.useState)({amount:0,stableAmount:0,baseAmount:0,lptAmount:0,lptFeeAmount:0}),n=ee(e),{undecimalize:i,undecimalizeMintAmount:r}=W(),o=(0,a.useCallback)((async()=>{const{balance:e,mint:t,stableBalance:a,lptSupply:o,baseBalance:l,baseMint:c,totalLptFee:u}=n,d=Number(await r(e,t)),m=Number(i(a,9)),p=Number(r(l,c)),h=Number(i(o,9)),g=Number(i(u,9));return s({amount:d,stableAmount:m,baseAmount:p,lptAmount:h,lptFeeAmount:g})}),[n,i,r]);return(0,a.useEffect)((()=>{o()}),[o]),t},pe=e=>{const t=ee(e);let s=(Math.floor((new Date).getTime()/1e3)-t.startTime.toNumber())/86400;return s<1&&(s=1),s},he=e=>{const t=me(e),[s,n]=(0,a.useState)({mintPrice:0,lptPrice:0}),i=(0,a.useCallback)((async()=>{const{amount:e,stableAmount:s,lptAmount:i}=t,r=s/e;return n({mintPrice:r,lptPrice:(r*e+s)/i})}),[t]);return(0,a.useEffect)((()=>{i()}),[i]),s};var ge=s(48744),ye=s.n(ge);const xe=e=>{let{poolAddress:t,closeModal:s}=e;const r=(0,n.useSelector)((e=>e.pools)),{baseMint:l,mint:c,lptMint:d,balance:m,baseBalance:p,lptSupply:h,fee:g}=r[t],[y,x]=(0,a.useState)("0"),[j,b]=(0,a.useState)("0"),[S,f]=(0,a.useState)(!1),[w,M]=(0,a.useState)(0),A=F(),{decimalizeMintAmount:C}=W(),v=Y(c.toBase58()),T=Y(l.toBase58()),P=Y(d.toBase58()),{calcDepositInfo:R}=X(),{getDecimals:B}=(0,i.useMint)();return(0,u.jsxs)(o.Row,{gutter:[16,16],style:{color:"#000000"},children:[(0,u.jsx)(o.Col,{span:24,style:{textAlign:"right"},children:(0,u.jsxs)(o.Typography.Text,{style:{color:"#000000"},children:["Available: ",(0,V.uR)(v.balance).format("0,0.[000]")]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{justify:"space-between",children:[(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Button,{type:"primary",onClick:()=>x(v.balance.toString()),children:"MAX"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(ae,{bordered:!1,style:{color:"#000000",textAlign:"center",fontSize:"20px",fontWeight:700},value:y,onValue:async e=>{x(e);const t=[await C(e,c),await C(j,l)],s=[m,p],n=await B(c.toBase58()),i=R(t,s,h,[n,9],g);M(i.lpOut)}})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(k,{style:{background:"#F4FCEB",color:"#000000",borderRadius:32,height:40,width:135},disabled:!0,value:c.toBase58()})})]})}),(0,u.jsx)(o.Col,{span:24,style:{textAlign:"right"},children:(0,u.jsxs)(o.Typography.Text,{style:{color:"#000000"},children:["Available: ",(0,V.uR)(T.balance).format("0,0.[000]")]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{justify:"space-between",children:[(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Button,{type:"primary",onClick:()=>b(T.balance.toString()),children:"MAX"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(ae,{bordered:!1,style:{color:"#000000",textAlign:"center",fontSize:"20px",fontWeight:700},value:j,onValue:async e=>{b(e);const t=[await C(y,c),await C(e,l)],s=[m,p],n=await B(c.toBase58()),i=R(t,s,h,[n,9],g);M(i.lpOut)}})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(k,{style:{background:"#F4FCEB",color:"#000000",borderRadius:32,height:40,width:135},disabled:!0,value:l.toBase58()})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Typography.Title,{style:{color:"#000000"},level:4,children:"Review"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Space,{direction:"vertical",style:{width:"100%"},children:[(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:"My supply"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#000000"},children:(0,V.uR)(P.balance).format("0,0.[000]")})})]}),(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:"You will receive"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#000000"},children:(0,V.uR)(w).format("0,0.[000]")})})]})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{loading:S,block:!0,onClick:async()=>{try{f(!0);const e=await C(y,c),n=await C(j,l),{txId:i}=await A.addLiquidity(t,e,new ge.BN(0),n);return s(),q("Deposited",i)}catch(e){Z(e)}finally{f(!1)}},type:"primary",children:"Deposit"})})]})},je=e=>{let{poolAddress:t}=e;const[s,i]=(0,a.useState)("0"),[r,l]=(0,a.useState)(!1),c=(0,n.useSelector)((e=>e.pools)),{lptMint:d,baseMint:p,mint:h}=c[t],{balance:g}=Y(d.toBase58()),x=F(),{decimalizeMintAmount:j}=W(),{lptAmount:b,stableAmount:S,amount:f}=me(t),w=(0,a.useMemo)((()=>Number(s)/b),[s,b]),M=S*w,A=f*w;return(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:4,background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},children:(0,u.jsxs)(o.Row,{justify:"end",children:[(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{onClick:()=>i(g.toString()),size:6,style:{cursor:"pointer"},children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",style:{textDecoration:"underline"},children:"Available:"}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000000",textDecoration:"underline"},children:(0,V.uR)(g).format("0,0")})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(ae,{bordered:!1,onValue:i,style:{fontSize:35,fontWeight:700,textAlign:"right",color:"#000000"},value:s})})]})})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Typography.Title,{level:5,style:{color:"#000000"},children:"You will receive"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{gutter:[8,8],children:[(0,u.jsx)(o.Col,{span:12,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:"4px 0 0 4px",background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsxs)(o.Space,{children:[(0,u.jsx)(m,{mintAddress:p.toBase58()}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:(0,u.jsx)(y,{mintAddress:p.toBase58()})})]}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:(0,V.uR)(M).format("0,0.[000]")})]})})}),(0,u.jsx)(o.Col,{span:12,children:(0,u.jsx)(o.Card,{bordered:!1,style:{borderRadius:"0 4px 4px 0",background:"rgb(20 20 20 / 10%)",boxShadow:"unset"},bodyStyle:{textAlign:"right"},children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsxs)(o.Space,{children:[(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:(0,u.jsx)(y,{mintAddress:h.toBase58()})}),(0,u.jsx)(m,{mintAddress:h.toBase58()})]}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:(0,V.uR)(A).format("0,0.[000]")})]})})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{block:!0,loading:r,onClick:async()=>{try{l(!0);const e=await j(s,d),{txId:n}=await x.removeLiquidity(t,e);return q("Deposited",n)}catch(e){Z(e)}finally{l(!1)}},type:"primary",children:"Withdraw"})})]})},be=e=>{let{poolAddress:t}=e;const[s,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)("Deposit");return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(B,{onClick:()=>n(!0),children:"Deposit / Withdraw"}),(0,u.jsx)(o.Modal,{visible:s,closeIcon:(0,u.jsx)(l.Z,{name:"close-outline"}),onCancel:()=>n(!1),footer:null,className:"lucid-modal-gradient",children:(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{span:24,style:{textAlign:"center"},children:(0,u.jsx)(o.Segmented,{value:i,onChange:e=>r(e),options:["Deposit","Withdraw"]})}),(0,u.jsx)(o.Col,{span:24,children:"Deposit"===i?(0,u.jsx)(xe,{poolAddress:t,closeModal:()=>n(!1)}):(0,u.jsx)(je,{poolAddress:t})})]})})]})},Se=e=>{const t=me(e),s=pe(e);return(0,a.useMemo)((()=>{const e=t.lptFeeAmount/s/t.lptAmount;return Number(Number(365*e*100).toFixed(6))}),[t.lptAmount,t.lptFeeAmount,s])},fe=e=>{const t=ee(e),s=he(e),n=Y(t.lptMint.toBase58())||{};return((null===n||void 0===n?void 0:n.balance)||0)*s.lptPrice},we=e=>{let{poolAddress:t}=e;const s=ee(t),n=he(t),[r,l]=(0,a.useState)(!1),c=F(),{undecimalize:d}=W(),[m,p]=(0,a.useState)("0"),[h,g]=(0,a.useState)("0"),{wallet:y}=(0,i.useWallet)(),x=(0,a.useCallback)((async()=>{const e=await c.getTokenAccounts(y.address,t,s.mint,s.baseMint);let n=0,i=0;try{const t=await c.program.account.cheque.fetch(e.cheque);n=Number(d(t.borrowAmount,9)),i=Number(d(t.baseAmount,9))}catch(r){}p(String(n)),g(String(i))}),[c,t,s.baseMint,s.mint,d,y.address]);(0,a.useEffect)((()=>{x()}),[x]);return(0,u.jsxs)(o.Row,{gutter:[16,16],style:{color:"#000000"},children:[(0,u.jsx)(o.Col,{span:12,children:(0,u.jsx)(ze,{label:"DEBT",value:(0,u.jsx)("span",{children:(0,V.uR)(h).format("$0,0.[00]")})})}),(0,u.jsx)(o.Col,{span:12,children:(0,u.jsx)(ze,{label:"TOTAL LOCKED",value:(0,u.jsx)("span",{children:(0,V.uR)(Number(m)*n.lptPrice).format("$0,0.[00]")})})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{loading:r,block:!0,onClick:async()=>{try{l(!0);const{txId:e}=await c.repay(t);return q("Replay",e)}catch(e){Z(e)}finally{l(!1)}},type:"primary",children:"Repay"})})]})},Me=e=>{let{poolAddress:t}=e;const[s,n]=(0,a.useState)("0"),[i,r]=(0,a.useState)(!1),{lptMint:l}=ee(t),c=he(t),{balance:d}=Y(l.toBase58()),m=F(),{decimalizeMintAmount:p}=W();return(0,u.jsxs)(o.Row,{gutter:[12,12],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Text,{style:{color:"#292321",fontSize:12},children:"You don't have to fear liquidation risk"})}),(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Typography.Text,{style:{color:"#000000"},children:["Available: ",(0,V.uR)(d).format("0,0.[000]")]})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{align:"middle",children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Button,{type:"primary",onClick:()=>n(d.toString()),children:"Max"})}),(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{children:[(0,u.jsx)(ae,{bordered:!1,onValue:n,style:{color:"#000000",fontSize:30,fontWeight:700,width:150,textAlign:"right"},value:s}),(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#000000"},children:"LPT"})]})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Typography.Title,{level:5,style:{color:"#000000"},children:"Review"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:"Total Borrow"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#000000"},children:(0,V.uR)(Number(s)*c.lptPrice/2).format("$0,0.[000]")})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{block:!0,loading:i,onClick:async()=>{try{r(!0);const e=await p(s,l),{txId:n}=await m.borrow(t,e);return q("Deposited",n)}catch(e){Z(e)}finally{r(!1)}},type:"primary",children:"Borrow"})})]})},Ae=e=>{let{poolAddress:t}=e;const[s,n]=(0,a.useState)(!1),[i,r]=(0,a.useState)("Borrow");return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(B,{onClick:()=>n(!0),children:"Borrow / Repay"}),(0,u.jsx)(o.Modal,{visible:s,closeIcon:(0,u.jsx)(l.Z,{name:"close-outline"}),onCancel:()=>n(!1),footer:null,className:"lucid-modal-gradient",children:(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{span:24,style:{textAlign:"center"},children:(0,u.jsx)(o.Segmented,{value:i,onChange:e=>r(e),options:["Borrow","Repay"]})}),(0,u.jsx)(o.Col,{span:24,children:"Borrow"===i?(0,u.jsx)(Me,{poolAddress:t}):(0,u.jsx)(we,{poolAddress:t})})]})})]})},Ce=e=>{let{rank:t,poolAddress:s}=e;const[i,r]=(0,a.useState)(),c=(0,n.useSelector)((e=>e.pools[s])),d=(e=>{const t=pe(e),s=me(e),n=he(e),i=(0,a.useMemo)((()=>s.lptFeeAmount*n.lptPrice),[s.lptFeeAmount,n.lptPrice]);return{totalFee:i,fee24h:i/t}})(s),p=(e=>{const t=me(e),s=he(e);return t.amount*s.mintPrice+t.stableAmount})(s),g=Se(s),x=fe(s);return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(o.Card,{bordered:!1,className:`pool-card top-${t+1}`,onClick:()=>r(i?void 0:s),children:(0,u.jsxs)(o.Row,{gutter:[24,24],align:"middle",children:[(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Typography.Title,{level:5,children:t+1})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(m,{mintAddress:c.mint.toBase58(),size:48})}),(0,u.jsx)(o.Col,{span:4,children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsx)(o.Typography.Title,{level:5,ellipsis:!0,children:(0,u.jsx)(h,{mintAddress:c.mint.toBase58()})}),(0,u.jsx)(o.Typography.Title,{level:5,className:"symbol",style:{color:"#000"},children:(0,u.jsx)(y,{mintAddress:c.mint.toBase58()})})]})}),(0,u.jsx)(o.Col,{span:3,children:(0,u.jsx)(P,{primary:!0,label:"APY",value:(0,V.uR)(g).format("0.00[00]%")})}),(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(P,{label:"Total Fee",value:(0,V.uR)(d.totalFee).format("0,0.00[00]"),mintAddress:c.baseMint.toBase58()})}),(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(P,{label:"Total Value Locked",value:(0,V.uR)(p).format("0,0.00[00]a"),mintAddress:c.baseMint.toBase58()})}),(0,u.jsx)(o.Col,{span:4,children:(0,u.jsx)(P,{label:"Your Liquidity",value:(0,V.uR)(Number(x)).format("0,0.00[00]"),mintAddress:c.baseMint.toBase58()})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Button,{type:"text",style:{padding:0,background:"transparent"},onClick:()=>{},children:(0,u.jsx)(l.Z,{name:i?"chevron-up-outline":"chevron-down-outline",style:{fontSize:32}})})})]})}),(0,u.jsx)(o.Collapse,{activeKey:i,className:"lucid-expand-card",children:(0,u.jsx)(o.Collapse.Panel,{header:null,showArrow:!1,children:(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{children:(0,u.jsx)(de,{poolAddress:s})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(be,{poolAddress:s})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(Ae,{poolAddress:s})})]})},s)})]})},ve=()=>{const[e,t]=(0,a.useState)(""),[s,n]=(0,a.useState)("0"),[i,r]=(0,a.useState)("0"),[l,c]=(0,a.useState)(!1),{decimalizeMintAmount:d,decimalize:m}=W(),p=F(),{balance:h}=Y(e);return(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{span:24,style:{textAlign:"center"},children:(0,u.jsx)(o.Typography.Title,{level:5,style:{color:"#000000"},children:"New HackaPool"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{gutter:[0,0],justify:"space-between",children:[(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",className:"caption",children:"Token Amount"}),(0,u.jsx)(k,{style:{background:"#F4FCEB",color:"#000000",borderRadius:32,height:40,width:135},value:e,onChange:t})]})}),(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",className:"caption",children:"Enter Price"}),(0,u.jsx)(ae,{bordered:!1,style:{color:"#000000",fontSize:"20px",fontWeight:700,width:90},value:i,onValue:r})]})}),(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsx)(o.Typography.Text,{type:"secondary",className:"caption",children:"Amount"}),(0,u.jsx)(ae,{bordered:!1,style:{color:"#000000",fontSize:"20px",fontWeight:700,width:90},value:s,onValue:n}),(0,u.jsxs)(o.Typography.Text,{style:{color:"#000000"},onClick:()=>n(h.toString()),children:["Available: ",(0,V.uR)(h).format("0,0.[000]")]})]})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{gutter:[8,8],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Typography.Title,{level:5,style:{color:"#000000"},children:"Review"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:"Total amount in the pool"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#000000"},children:(0,V.uR)(s).format("0,0.[000]")})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},children:"Price token"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#000000"},children:(0,V.uR)(i).format("0,0.[000]")})})]})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{type:"primary",block:!0,onClick:async()=>{const t=new ge.BN(1e7);try{c(!0);const n=Number(s)*Number(i),r=await d(s,e),a=m(n,9),{txId:o}=await p.initializePool(e,G.sol.baseMint,t,r,a,new ge.BN(0));q("Create Pool",o)}catch(n){Z(n)}finally{c(!1)}},disabled:l,children:"Create"})})]})},Te=()=>{const[e,t]=(0,a.useState)(!1);return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(o.Button,{type:"primary",onClick:()=>t(!0),children:"New"}),(0,u.jsx)(o.Modal,{visible:e,onCancel:()=>t(!1),footer:!1,closeIcon:(0,u.jsx)(l.Z,{name:"close-outline"}),className:"lucid-modal-gradient",children:(0,u.jsx)(ve,{})})]})},{sol:{baseMint:ke}}=G,Pe=new ge.BN(0),Re=e=>{let{label:t="",value:s}=e;return(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{flex:"auto",style:{color:"#000000"},children:t}),(0,u.jsx)(o.Col,{children:s})]})},Be=e=>{let{poolAddress:t}=e;const[s,n]=(0,a.useState)(!1),[r,l]=(0,a.useState)(ke),[c,d]=(0,a.useState)("0"),[p,g]=(0,a.useState)("0"),[y,x]=(0,a.useState)(!1),{balance:j}=Y(r),{decimalizeMintAmount:b}=W(),{tokenProvider:S}=(0,i.useMint)();let f="4VY3v61QFN3S4amq5RpXGNX3UpXK1KzYyG8cLWnZbZH6";t&&(f=t);const w=ee(f),M=F(),A=!Number(c)||Number(c)>Number(j),C=(0,a.useCallback)((async()=>{if(!A)try{x(!0);const e=await b(c,r),t=await b(p,ke),s=r===ke;s||await M.swapJupiter(ke,r,e,t);const{txId:i}=await M.addLiquidity(f,Pe,Pe,s?e:t);return n(!1),q("Join Hakapool Successfully",i)}catch(e){Z(e)}finally{x(!1)}}),[A,b,c,r,p,M,f]),v=(0,a.useCallback)((async()=>{var e;if(!r)return;const t=await S.findByAddress(r),s=null===t||void 0===t||null===(e=t.extensions)||void 0===e?void 0:e.coingeckoId;if(s){const e=await(0,V.l$)(s);return g(String(Number(c)*e.price))}return g("0")}),[c,r,S]);return(0,a.useEffect)((()=>{v()}),[v]),(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)("div",{className:"btn-bg joinnow",children:(0,u.jsx)("div",{className:"btn-group",children:(0,u.jsx)("div",{className:"btn ball",children:(0,u.jsxs)("button",{onClick:()=>n(!0),children:[(0,u.jsx)("div",{className:"joinnow-ball"}),(0,u.jsxs)("a",{children:["Join now",(0,u.jsx)("span",{"data-letters":"Go!"}),(0,u.jsx)("span",{"data-letters":"Go!"})]})]})})})}),(0,u.jsx)(o.Modal,{visible:s,onCancel:()=>n(!1),footer:!1,closable:!1,className:"lucid-modal-gradient",children:(0,u.jsxs)(o.Row,{gutter:[24,24],justify:"end",align:"middle",children:[(0,u.jsx)(o.Col,{span:24,style:{textAlign:"center"},children:(0,u.jsx)(o.Typography.Title,{style:{color:"#000000"},level:3,children:"Join with best pool"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(k,{style:{background:"#F4FCEB",color:"#000000",borderRadius:32,height:40,width:135},value:r,onChange:l})}),(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{size:6,children:[(0,u.jsx)(o.Typography.Text,{style:{color:"#000000"},type:"secondary",children:"Available:"}),(0,u.jsx)(o.Typography.Text,{style:{cursor:"pointer",color:"#000000"},onClick:()=>d(j.toString()),children:(0,V.uR)(j).format("0,0.[0000]")})]})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{gutter:[24,24],wrap:!1,align:"middle",children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(ae,{bordered:!1,value:c,onValue:d,style:{fontSize:40,fontWeight:700,textAlign:"right",color:"#000000"}})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(o.Button,{type:"primary",onClick:()=>d(j.toString()),children:"Max"})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Typography.Title,{style:{color:"#000000"},level:5,children:"Review"})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{gutter:[8,8],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(Re,{label:"Total Value",value:(0,u.jsx)(o.Space,{children:(0,u.jsxs)(o.Typography.Text,{style:{color:"#000000"},children:["$",(0,V.uR)(p).format("0,0.[0000]")]})})})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(Re,{label:"HakaPool will Join",value:(0,u.jsxs)(o.Space,{style:{color:"#000000"},children:[(0,u.jsx)(h,{mintAddress:w.mint.toBase58()}),(0,u.jsx)(m,{mintAddress:w.mint.toBase58()})]})})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(o.Button,{type:"primary",style:{borderRadius:999},onClick:C,disabled:A,loading:y,block:!0,children:"Deposit"})})]})})]})},Ne=e=>{let{title:t="",label:s="",description:n=""}=e;return(0,u.jsxs)(o.Space,{direction:"vertical",style:{textAlign:"center"},children:[(0,u.jsx)(o.Typography.Title,{level:1,style:{color:"#283813"},children:t}),(0,u.jsxs)(o.Space,{direction:"vertical",size:0,children:[(0,u.jsx)(o.Typography.Title,{level:5,style:{fontWeight:300,color:"#283813"},children:s}),(0,u.jsx)(o.Typography.Title,{level:5,style:{color:"#283813"},children:n})]})]})},Ie=()=>(0,u.jsx)(o.Card,{className:"bg-gradient lucid-card-gradient",bordered:!1,bodyStyle:{padding:32},children:(0,u.jsxs)(o.Row,{gutter:[48,48],justify:"space-between",children:[(0,u.jsx)(o.Col,{span:12,children:(0,u.jsxs)(o.Space,{size:0,style:{width:"100%"},direction:"vertical",children:[(0,u.jsxs)(o.Row,{gutter:[12,12],children:[(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(o.Typography.Title,{level:2,style:{fontWeight:300,color:"#000"},children:"HAKAPOOL"})}),(0,u.jsx)(o.Col,{children:(0,u.jsx)(Te,{})})]}),(0,u.jsx)(o.Typography.Title,{style:{color:"#000"},level:1,children:"ALL IN ONE 1 STEP"}),(0,u.jsx)(o.Typography.Title,{level:1,style:{fontSize:60,color:"#000"},children:"EASY REWARD"})]})}),(0,u.jsx)(o.Col,{span:12,children:(0,u.jsxs)(o.Row,{gutter:[32,32],style:{height:"100%"},align:"middle",children:[(0,u.jsx)(o.Col,{children:(0,u.jsxs)(o.Space,{children:[(0,u.jsx)(Ne,{title:"JOIN",label:"DEPOSIT",description:"ANY TOKEN"}),(0,u.jsx)(o.Divider,{style:{minWidth:80}}),(0,u.jsx)(Ne,{title:"CLAIM",label:"RECEIVE",description:"REWARD HIGH"})]})}),(0,u.jsx)(o.Col,{flex:"auto",children:(0,u.jsx)(Be,{})})]})})]})});const Ke=s.p+"static/media/ico-rank.e8bad3d57040eab8fd4652843fbb1318.svg",ze=e=>{let{label:t="",value:s,action:n}=e;return(0,u.jsx)(o.Card,{bordered:!1,className:"lucid-card-gradient",style:{textAlign:"center",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsx)(o.Typography.Title,{level:1,style:{color:"#579B04"},children:s}),(0,u.jsx)(o.Typography.Text,{style:{color:"#000"},children:t}),n]})})},De=()=>{const e="4VY3v61QFN3S4amq5RpXGNX3UpXK1KzYyG8cLWnZbZH6",{lptMint:t}=ee(e),{balance:s}=Y(t.toBase58()),[n,i]=(0,a.useState)(!1),{decimalizeMintAmount:r}=W(),c=F(),d=(0,a.useCallback)((async()=>{try{i(!0);const n=await r(s,t),{txId:a}=await c.removeLiquidity(e,n);return q("Deposited",a)}catch(n){Z(n)}finally{i(!1)}}),[s,e,r,t,c]);return(0,u.jsx)(o.Button,{type:"text",onClick:d,loading:n,children:(0,u.jsxs)(o.Typography.Text,{style:{color:"#000",textDecoration:"underline"},children:["CLAIM ALL ",(0,u.jsx)(l.Z,{name:"chevron-forward-outline"})]})})},Le=()=>{const e=(0,n.useSelector)((e=>e.pools)),[t,s]=(0,a.useState)("0"),i=fe("4VY3v61QFN3S4amq5RpXGNX3UpXK1KzYyG8cLWnZbZH6"),{undecimalize:r}=W(),l=(0,a.useCallback)((()=>{let t=0;for(const s of Object.values(e))t+=2*Number(r(s.stableBalance,9));s(t.toString())}),[e,r]);return(0,a.useEffect)((()=>{l()}),[l]),(0,u.jsxs)(o.Row,{gutter:[48,48],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsxs)(o.Row,{gutter:[24,24],children:[(0,u.jsx)(o.Col,{xs:24,lg:8,children:(0,u.jsxs)(o.Space,{direction:"vertical",children:[(0,u.jsx)(o.Typography.Title,{level:2,style:{color:"#ABFC47"},children:"THE AUTO"}),(0,u.jsx)(o.Typography.Text,{children:"A single deposit generates yield from Hakapool positions, the highest quality yield sources in the Sentre ecosystem."})]})}),(0,u.jsx)(o.Col,{xs:24,lg:8,children:(0,u.jsxs)(o.Row,{gutter:[12,12],children:[(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(ze,{label:"TOTAL VALUE LOCK",value:(0,u.jsx)("span",{children:(0,V.uR)(t).format("$0,0.00[00]a")})})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(ze,{label:"TOTAL POOLS",value:(0,u.jsx)("span",{children:Object.keys(e).length})})})]})}),(0,u.jsx)(o.Col,{xs:24,lg:8,children:(0,u.jsx)(ze,{label:"YOUR POSITION",value:(0,u.jsxs)("span",{children:["$",(0,V.uR)(i).format("0,0.00[00]")]}),action:(0,u.jsx)(De,{})})})]})}),(0,u.jsx)(o.Col,{span:24,children:(0,u.jsx)(Ie,{})}),(0,u.jsx)(o.Col,{span:18,children:(0,u.jsx)(o.Row,{gutter:[24,24],justify:"center",align:"middle",children:Object.keys(e).map(((e,t)=>(0,u.jsxs)(o.Col,{span:24,className:"wrap-card-pool",children:[0===t&&(0,u.jsx)(o.Image,{className:"ico-number-one",src:Ke,alt:"number one"}),(0,u.jsx)(Ce,{rank:t,poolAddress:e})]},e)))})}),(0,u.jsx)(o.Col,{span:6,children:(0,u.jsxs)(o.Space,{direction:"vertical",size:12,style:{textAlign:"right"},children:[(0,u.jsxs)(o.Space,{direction:"vertical",size:4,children:[(0,u.jsx)(o.Typography.Title,{level:5,style:{color:"#ABFC47"},children:"CREATE LIQUIDIY POOL"}),(0,u.jsx)(o.Typography.Title,{level:4,style:{color:"#ABFC47"},children:"NOT HARDER"})]}),(0,u.jsx)(o.Typography.Text,{children:"A single deposit generates yield from Hakapool positions, the highest quality yield sources in the Sentre ecosystem."})]})}),(0,u.jsx)(o.Col,{span:24})]})},{manifest:{appId:Oe}}=G,Ee=`/app/${Oe}`,Fe=()=>{const[e,t]=(0,a.useState)(!1),[s,n]=(0,a.useState)([]),r=F(),{accounts:c}=(0,i.useAccount)(),d=(0,a.useCallback)((async()=>{const e=await r.program.account.jupiter.all();n(e)}),[r.program.account.jupiter]);(0,a.useEffect)((()=>{d()}),[d]);return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(o.Button,{type:"primary",onClick:()=>t(!0),children:"Open Jupiter Market"}),(0,u.jsxs)(o.Modal,{visible:e,onCancel:()=>t(!1),footer:!1,closeIcon:(0,u.jsx)(l.Z,{name:"close-outline"}),title:"Create new jupiter",children:[(0,u.jsx)(o.Button,{type:"primary",onClick:()=>(async()=>{try{const e=await r.initializeJupiter();q("Create",e.txId)}catch(e){}})(),children:"New"})," ",(0,u.jsx)(o.Row,{gutter:[16,16],children:s.map((e=>(0,u.jsxs)(o.Col,{span:24,children:[(0,u.jsx)(m,{mintAddress:e.account.baseMint.toBase58()}),e.account.baseMint.toBase58(),(0,u.jsx)(o.Button,{type:"primary",onClick:()=>(async e=>{try{const t=Object.values(c)[0],s=await r.swapJupiter(e.account.baseMint,t.mint,new(ye())(0),new(ye())("1000000000000000"));s&&q("Claim 1000k",s)}catch(t){}})(e),children:"Claim 1000k"})]})))})]})]})};const Ve=s.p+"static/media/bg_lucid.cd3bf3a4abd8f9b362bd3dce2908f2bb.svg",qe=()=>{const{appRoute:e}=(()=>{const{search:e,pathname:t}=(0,r.useLocation)(),s=(0,r.useHistory)(),n=(0,r.useParams)(),i=(0,a.useMemo)((()=>new URLSearchParams(e)),[e]),o=(0,a.useCallback)((e=>i.get(e)),[i]),l=(0,a.useCallback)((()=>{const e={};return i.forEach(((t,s)=>{e[s]=t})),e}),[i]),c=(0,a.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=l();!1===n&&(t=Object.assign(i,t));const r=new URLSearchParams(t);r&&(e+=`?${r.toString()}`),s.push(`${Ee}${e}`)}),[l,s]);return{getQuery:o,getAllQuery:l,pushHistory:c,appRoute:Ee,pathname:t,params:n}})(),{setBackground:t}=(0,i.useUI)();(0,a.useEffect)((()=>{t({light:Ve,dark:Ve})}),[t]);return(0,u.jsx)(o.Row,{gutter:[24,24],align:"middle",justify:"center",children:(0,u.jsxs)(o.Col,{style:{maxWidth:1200},span:24,children:[(0,u.jsx)(o.Button,{onClick:()=>(async()=>{})(),children:"Create new Token for test"}),(0,u.jsx)(Fe,{}),(0,u.jsx)(r.Route,{exact:!0,path:`${e}`,component:Le})]})})};var Ze=s(19289),_e=s(85912);const We="main",Je=(0,Ze.createAsyncThunk)("main/increaseCounter",(async(e,t)=>{let{getState:s}=t;const{main:{counter:n}}=s();return{counter:n+1}})),Qe=(0,Ze.createSlice)({name:We,initialState:{counter:0},reducers:{},extraReducers:e=>{e.addCase(Je.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ge="pools",$e=(0,Ze.createAsyncThunk)("pools/upsetPool",(async e=>{let{address:t,data:s}=e;if(!c.account.isAddress(t))throw new Error("Invalid pool address");if(!s)throw new Error("Data is empty");return{[t]:s}})),He=(0,Ze.createAsyncThunk)("pools/upsetPools",(async e=>e)),Ue=(0,Ze.createSlice)({name:Ge,initialState:{},reducers:{},extraReducers:e=>{e.addCase(He.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)})).addCase($e.fulfilled,((e,t)=>{let{payload:s}=t;Object.assign(e,s)}))}}).reducer,Ye=(0,Ze.configureStore)({middleware:e=>e(_e.h),devTools:(0,_e.$)("lucid"),reducer:{main:Qe,pools:Ue}});let Xe=0;const et=e=>{const[t,s]=(0,a.useState)(!0),i=(0,n.useDispatch)(),r=F(),o=(0,a.useCallback)((async()=>{try{let e=await r.getPools();await i(He(e)).unwrap()}catch(e){return window.notify({type:"error",description:"Cannot fetch data of pools"})}finally{s(!1)}}),[i,r]),l=(0,a.useCallback)((async()=>{if(Xe)return console.warn("Already watched");Xe=r.watch(((e,t)=>e?console.error(e):t?i($e({address:t.address,data:t.data})):void 0),[])}),[i,r]);return(0,a.useEffect)((()=>(o(),l(),()=>{(async()=>{try{await r.unwatch(Xe)}catch(e){}})(),Xe=0})),[o,r,l]),t?(0,u.jsx)("div",{children:"Loading"}):(0,u.jsx)(a.Fragment,{children:e.children})},{manifest:{appId:tt}}=G,st=()=>(0,u.jsx)(i.UIProvider,{appId:tt,antd:{prefixCls:tt},children:(0,u.jsx)(i.WalletProvider,{children:(0,u.jsx)(i.MintProvider,{children:(0,u.jsx)(i.AccountProvider,{children:(0,u.jsx)(n.Provider,{store:Ye,children:(0,u.jsx)(et,{children:(0,u.jsx)(qe,{})})})})})})})},85912:(e,t,s)=>{"use strict";s.d(t,{$:()=>o,h:()=>l});var n=s(71256),i=s(48744),r=s.n(i),a=s(97429).Buffer;const o=e=>!1;BigInt.prototype.toJSON=function(){return this.toString()};const l={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof n.PublicKey||e instanceof r()||e instanceof a}}},63805:(e,t,s)=>{"use strict";s.d(t,{Bv:()=>a,OB:()=>i,ef:()=>r,f4:()=>l});s(71256);var n=s(53933);const i="production",r=(()=>{switch(n.Z.get("network")){case"devnet":return"devnet";case"testnet":return"testnet";default:return"mainnet"}})(),a=(()=>{switch(r){case"devnet":return 103;case"testnet":return 102;default:return 101}})(),o={devnet:["https://api.devnet.solana.com","https://psytrbhymqlkfrhudd.dev.genesysgo.net:8899/"],testnet:["https://api.testnet.solana.com"],mainnet:["https://ssc-dao.genesysgo.net/","https://solana-api.projectserum.com","https://solitary-autumn-water.solana-mainnet.quiknode.pro/dcbac9d444818a20ac583541dec35b44c6840888/"]},l=(()=>{const e=o[r],t=e[Math.floor(Math.random()*e.length)];return console.log("Debug OS RPC:",t),t})()},53933:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});const n="sentre",i=window.localStorage,r=e=>{try{return e?JSON.parse(e):null}catch(t){return null}},a={set:(e,t)=>{let s=r(i.getItem(n));s&&"object"===typeof s||(s={}),s[e]=t,i.setItem(n,JSON.stringify(s))},get:e=>{let t=r(i.getItem(n));return t&&"object"===typeof t?t[e]:null},clear:e=>{a.set(e,null)}},o=a},45268:(e,t,s)=>{"use strict";s.d(t,{sA:()=>p,kU:()=>h,l$:()=>y,uR:()=>g});var n=s(95418),i=s(16200),r=s.n(i),a=s(63805);const o={ttl:3e4},l={limit:{calls:10,time:1e3},cache:o};class c{constructor(e){this.key="",this.resolveQueue=[],this.rejectQueue=[],this.key=e}add(e,t){this.resolveQueue.push(e),this.rejectQueue.push(t)}resolves(e){for(;this.resolveQueue.length>0;){this.resolveQueue.shift()(e)}}rejects(e){for(;this.rejectQueue.length>0;){this.rejectQueue.shift()(e)}}}class u{static set(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;this.mapCache.set(e,t),setTimeout((()=>{this.mapCache.delete(e)}),s.ttl)}static get(e){return this.mapCache.get(e)}}u.mapCache=new Map;class d{static getSingleFlight(e){const t=JSON.stringify(e);if(this.mapInstance.has(t)){const e=this.mapInstance.get(t);if(e)return e}let s=new m(e);return this.mapInstance.set(t,s),s}static async load(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===typeof e&&(e=JSON.stringify(e));let n=d.getSingleFlight(s);d.mapInstance.set(e,n);const i=new c(e);return n.load(i,t)}}d.mapInstance=new Map;class m{constructor(e){this.config=void 0,this.intervalRequest=void 0,this.timeLogs=[],this.mapRequestCalling=new Map,this.requestQueue=[],this.config=Object.assign(l,e)}async load(e,t){const s=u.get(e.key);if(s)return Promise.resolve(s);let n=!1,i=this.mapRequestCalling.get(e.key);return i||(i=e,n=!0,this.mapRequestCalling.set(i.key,i)),new Promise(((e,s)=>{if(!i)return s("Not found request!");i.add(e,s),n&&this.fetch(i,t)}))}fetch(e,t){if(!this.validateLimit())return this.addRequestQueue(e,t);this.createTimeLogs(),t().then((t=>{u.set(e.key,t,this.config.cache),e.resolves(t)})).catch((t=>{e.rejects(t)})).finally((()=>{this.mapRequestCalling.delete(e.key),this.fetchRequestQueue(t)}))}fetchRequestQueue(e){if(!this.validateLimit())return;const t=this.requestQueue.shift();t&&this.load(t,e),0===this.requestQueue.length&&this.intervalRequest&&clearInterval(this.intervalRequest)}addRequestQueue(e,t){var s;this.requestQueue.push(e),this.intervalRequest=setInterval((()=>{this.fetchRequestQueue(t)}),null===(s=this.config.limit)||void 0===s?void 0:s.time)}validateLimit(){return!0}createTimeLogs(){var e;if(!this.config.limit)return;const t=(new Date).getTime();this.timeLogs.push(t),this.timeLogs.length>(null===(e=this.config.limit)||void 0===e?void 0:e.calls)&&this.timeLogs.shift()}}const p=e=>new Promise((t=>setTimeout(t,e))),h=e=>n.account.isAddress(e)?`https://explorer.solana.com/address/${e}?cluster=${a.ef}`:`https://explorer.solana.com/tx/${e}?cluster=${a.ef}`,g=e=>e?r()(e):r()("0"),y=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return d.load("fetchCGK"+e,(()=>n.utils.parseCGK(e)))}},46601:()=>{},89214:()=>{},85568:()=>{},52361:()=>{},94616:()=>{},55024:()=>{}}]);
//# sourceMappingURL=481.e2411e07.chunk.js.map